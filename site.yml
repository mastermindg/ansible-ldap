---
# This playbook deploys a multi-master LDAP cluster and a Linux client

- name: Setup LDAP servers
  hosts: server
  become: "yes"
  roles:
    - ldap-server

- name: Setup Initial Config
  hosts: initial
  become: "yes"
  roles:
    - ldap-config

- name: Setup LDAP Replication
  hosts: server
  become: "yes"
  roles:
    - ldap-replicate

# Need to setup the rest of the servers with
# the certificates and keys generated by the first
- name: Configure remaining servers for TLS
  hosts: server:!initial
  become: "yes"
  roles:
    - ldap-singlecert

# - name: Install OpenLDAP client
#   hosts: client
#   become: "yes"
#   roles:
#     - ldap-client
